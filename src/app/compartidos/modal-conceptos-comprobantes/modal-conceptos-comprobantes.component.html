<div class="modal fade" id="modal_conceptos" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"
  style="max-width:100%;">
  <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered" role="document" style="max-width:92%;">
    <div class="modal-content">

      <div class="modal-header">
        <h4 class="modal-title p-b-15" id="ModalLabel">Detalle de Conceptos</h4>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

      <div class="modal-body">
        <ng-container>
          <div class="row">
            <div class="col-sm-6 col-md-4">
              <label for="">
                Raz贸n social:
              </label>
              {{ comprobante.razon_social }}
            </div>
            <div class="col-sm-6 col-md-4">
              <label for="">
                Folio de Comprobaci贸n:
              </label>
              {{ comprobante.folio_comprobacion }}
            </div>
            <div class="col-sm-6 col-md-4">
              <label for="">
                Fecha Comprobante:
              </label>
              {{ comprobante.fecha_comprobante | date:'yyyy-MM-dd' }}
            </div>
            <div class="col-sm-6 col-md-4">
              <label for="">
                Estatus:
              </label>
              {{ comprobante.estatus }}
            </div>
            <div class="col-sm-6 col-md-4">
              <label for="">
                Forma de Pago:
              </label>
              {{ comprobante.forma_pago }}
            </div>
            <div class="col-sm-6 col-md-4">
              <label for="">
                Moneda:
              </label>
              {{ comprobante.moneda }}
            </div>
            <div class="col-sm-6 col-md-4">
              <label for="">
                Total:
              </label>
              {{ comprobante.total | currency: '$' }}
            </div>
            <div class="col-sm-6 col-md-4">
              <label for="">
                Monto a Reembolsar:
              </label>
              {{ comprobante.monto_reembolsar | currency:'$' }}
            </div>
          </div>
          <div class="row my-3">
            <div class="col text-right">
              <em *ngIf="comprobante.file" (click)="abrirDocumentoNuevaPestana(comprobante.file)"
                class="btn btn-sm btn-outline-primary mx-2 fas fa-file-archive"></em>
              <em *ngIf="comprobante.xml" (click)="abrirDocumentoNuevaPestana(comprobante.xml)"
                class="btn btn-sm btn-outline-primary mx-2 fas fa-file-code"></em>
              <em *ngIf="comprobante.pdf" (click)="abrirDocumentoNuevaPestana(comprobante.pdf)"
                class="btn btn-sm btn-outline-primary mx-2 fas fa-file-pdf"></em>
            </div>
          </div>
        </ng-container>

        <ng-container>
          <div class="row mh-40vh">
            <div class="col-md-12">
              <div class="panel panel-inverse">
                <div class="panel-heading">
                  <h4 class="panel-title">Lista - Conceptos</h4>
                </div>
                <form *ngIf="comprobante.conceptos" [formGroup]="main_formulario">
                  <div class="table-responsive">
                    <table class="table" id="tabla_conceptos">
                      <caption></caption>
                      <thead>
                        <tr>
                          <th scope="col">Descripci贸n</th>
                          <th scope="col">Unidad</th>
                          <th scope="col">Valor Unitario</th>
                          <th scope="col">Cantidad</th>
                          <th scope="col">Importe</th>
                          <th style="width: 250px;" scope="col">Concepto</th>
                          <th scope="col">Monto a Reembolsar</th>
                          <!-- <th scope="col">Observaci贸n</th> -->
                          <th scope="col">Comprobante Fiscal</th>
                          <th scope="col">Aplica</th>
                        </tr>
                      </thead>
                      <tbody *ngIf="comprobante.conceptos.length" formArrayName="conceptos">
                        <tr [formGroupName]="i" *ngFor="let item of controlsMain.conceptos.controls; let i = index">
                          <th scope="">
                            {{ comprobante.conceptos[i].concepto }}
                          </th>
                          <th scope="">
                            {{ comprobante.conceptos[i].unidad }}
                          </th>
                          <th class="text-right" scope="">
                            {{ comprobante.conceptos[i].valorUnitario | currency: '$' }}
                          </th>
                          <th scope="" class="text-center">
                            {{ comprobante.conceptos[i].cantidad }}
                          </th>
                          <th class="text-right" scope="">
                            {{ comprobante.conceptos[i].importe | currency: '$' }}
                          </th>
                          <th scope="">
                            <select2 [data]="lista_cuentas" [options]="{placeholder: 'Seleccione Concepto... '}"
                              (valueChanged)="onChangeConcepto($event, i)" name="concepto" id="concepto"
                              [value]="comprobante.conceptos[i].id_cuenta_agrupacion">
                            </select2>
                          </th>
                          <th class="text-right" scope="">
                            <input currencyMask [options]="{ thousands: ',', decimal: '.' }"
                              formControlName="monto_rembolsar" type="text" name="linea_detalle" maxlength="20"
                              class="form-control" (keyup)="cambiarEstatusTotalModificado(i)">
                          </th>
                          <!-- <th class="text-right" scope="">
                            <textarea class="form-control" id="exampleFormControlTextarea1" rows="1" maxlength="500"
                              name="linea_detalle" formControlName="observacion"
                              style="width: 150px !important; max-height: 250px !important;"></textarea>
                          </th> -->
                          <th class="text-center" scope="">
                            <input type="checkbox" class="mx-auto" formControlName="comprobante_fiscal">
                          </th>
                          <th class="text-center" scope="">
                            <input type="checkbox" class="mx-auto" formControlName="aplica">
                          </th>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </ng-container>

      </div>

      <div class="modal-footer">
        <div class="row mt-2 mb-2">
          <div class="col text-right">
            <button class="btn btn-danger mr-2 " (click)="cerrarModalConceptos()"> Cerrar </button>
            <button *ngIf="comprobante.estatus.toLowerCase() == 'borrador'" [disabled]="!main_formulario.valid"
              class="btn btn-primary" (click)="submitFormulario()">
              Guardar </button>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>
